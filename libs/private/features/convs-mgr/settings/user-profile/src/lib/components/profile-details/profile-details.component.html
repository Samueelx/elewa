<div *ngIf="userDetailsLoaded; else loading" class="profile-details">

  <div class="section-one" [formGroup]="userFormGroup">
    <div class="user-data" fxLayout="row" fxLayoutAlign="start start">

      <div fxLayout="column" fxLayoutAlign="start start" class="user-profile-picture">
        <!-- <p class="label">Your Photo</p> -->

        <img [src]="user.photoUrl" alt="">
        <!-- <img  alt=""> -->

        <div fxLayout="row" fxLayoutAlign="space-between start" class="top-butons" *ngIf="editProfile">
          <button *hasViewAccess="CAN_PERFOM_ADMIN_ACTIONS" style="margin-right: 10px;" (click)="newProfileImg()" mat-stroked-button> Upload</button>
          <button *hasViewAccess="CAN_PERFOM_ADMIN_ACTIONS" mat-stroked-button> Remove</button>
        </div>
      </div>

      <div fxLayout="column" fxLayoutAlign="start start" class="user-info" fxFlex="40%">

        <div fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="84px" style="width: 100%;" fxFlex>
          <div fxLayout="column" fxLayoutAlign="start start" class="names">
            <p class="label">First Name</p>
            
              <input formControlName="firstName" matInput placeholder="Jack">
           
          </div>
  
          <div fxLayout="column" fxLayoutAlign="start start" class="names">
            <p class="label"> Last Name</p>
            
              <input formControlName="lastName" matInput placeholder="Sparrow">
            
          </div>
        </div>

        <div fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="84px" style="width: 100%;" fxFlex>
          <div fxLayout="column" fxLayoutAlign="start start" class="names">
            <p class="label">Role</p>
           
              <input disabled="true" matInput [placeholder]="roles">
            
          </div>
  
          <div fxLayout="column" fxLayoutAlign="start start" class="names">
            <p class="label"> Email</p>
            
              <input formControlName="email" matInput placeholder="johndoe@gmail.com">
            
          </div>
        </div> 
         
       
        <div fxLayout="row" fxLayoutAlign="space-between" fxLayoutGap="19px" fxFlex class="bottons-div">
          <div fxLayout="column" fxLayoutAlign="start start">
            <button class="cancel" mat-raised-button *ngIf="editProfile">
              Cancel
            </button>
          </div>
  
          <div fxLayout="column" fxLayoutAlign="end end" >     
            <button class="btn edit-btn" *hasViewAccess="CAN_PERFOM_ADMIN_ACTIONS" (click)="editUserProfile()" mat-raised-button>
              <span *ngIf="!editProfile; else saveProfile">Edit Profile</span>
              <ng-template #saveProfile>
                <span>Save Profile</span>
              </ng-template>
            </button>
          </div>
        </div> 
        
        
      </div>                  

      
    </div>
  </div>

  <div fxLayout="column" class="section-two">
    <p class="label">Change password</p>
  
    <div fxLayout="row" fxLayoutAlign="space-between start" class="email-details">
      <p class="your-email">
        It is advised to change your password every 2-4 months. 
      </p>
  
      <!-- Move the button inside the email-details div -->
      <button class="btn password-button" *hasViewAccess="CAN_PERFOM_ADMIN_ACTIONS" (click)="updatePassword()" mat-raised-button>Get Password Reset Link</button>
    </div>
  
  </div>
  

  <div class="section-two">
    <div fxLayout="column" fxLayoutAlign="start start" class="delete-profile">
      <p class="label-blue underline"> Delete Profile</p>
      <p>
        You will receive an email to confirm your decision. This will not end your subscription or payments
        and you will continue to be charged.
        You can cancel your <br>subscription, or switch payment methods to keep the team active.
      </p>
    </div>
  </div>
</div>

<ng-template #loading>
  <div class="spinner">
    <p>Fetching user data</p>
    <mat-spinner diameter="50"></mat-spinner>
  </div>
</ng-template>